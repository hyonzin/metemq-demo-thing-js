{
  "name": "mqtt-emitter",
  "version": "1.2.4",
  "description": "Emit MQTT events to listeners using mqtt-regex for routing",
  "main": "index.js",
  "scripts": {
    "test": "node test",
    "build": "browserify index.js --standalone MQTTEmitter > build/MQTTEmitter.js",
    "build-min": "browserify index.js --standalone MQTTEmitter | uglifyjs - > build/MQTTEmitter.min.js"
  },
  "repository": {
    "type": "git",
    "url": "git+https://github.com/RangerMauve/mqtt-emitter.git"
  },
  "keywords": [
    "mqtt",
    "regex",
    "events",
    "emitter",
    "router"
  ],
  "author": {
    "name": "RangerMauve"
  },
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/RangerMauve/mqtt-emitter/issues"
  },
  "homepage": "https://github.com/RangerMauve/mqtt-emitter",
  "devDependencies": {
    "browserify": "^5.11.1",
    "node-noop": "0.0.1",
    "tape": "^4.5.1",
    "uglify-js": "^2.4.15"
  },
  "dependencies": {
    "mqtt-regex": "^1.0.4",
    "mqtt-store": "^1.0.2"
  },
  "readme": "mqtt-emitter\r\n============\r\n\r\nThis is a library for easily routing MQTT traffic in JavaScript. The API is the same as EventEmitter, but it automatically routes your topics behind the scenes. The parsing of topic patterns is done by [mqtt-regex](https://github.com/RangerMauve/mqtt-regex). This library can be used in Node, Browserify, or as a drop in JS file for the browser.\r\n\r\nA goal of this library is to leave the actual MQTT transport up to the user so that they can use whatever MQTT connection they want for the actual transport, and just relay all incoming messages to this library for routing. Take a look at [MQTT.js](https://github.com/adamvr/MQTT.js) for node and [Mows](https://github.com/mcollina/mows) for the browser.\r\n\r\nExample\r\n-------\r\nHere's an example of how you can use the library to handle traffic from a hypothetical chat based on MQTT.\r\n``` javascript\r\nvar MQTTEmitter = require(\"mqtt-emitter\");\r\n\r\nvar events = new MQTTEmitter();\r\n\r\nevents.on(\"user/+name/message/#path\", function(data, params) {\r\n\tvar name = params.name;\r\n\tvar path = params.path;\r\n\tconsole.log(name, \"@\", \"/\" + path.join(\"/\"), \":\", data);\r\n});\r\n\r\nvar messages = [\"hi\", \"what's up?\", \"Hey I'm new.\", \"How about that weather, eh?\", \"I know\"];\r\nvar names = [\"Bob\", \"Angelina\", \"xX420xNoSc0peXx\"];\r\nvar count = 10;\r\n\r\nfunction say_something() {\r\n\tvar event = \"user/\" + random_from_list(names) + \"/message/lobby\";\r\n\tevents.emit(event, random_from_list(messages));\r\n\tif (count--) setTimeout(say_something, 1000);\r\n}\r\n\r\nsay_something();\r\n\r\nfunction random_from_list(list) {\r\n\treturn list[Math.floor(Math.random() * list.length)];\r\n}\r\n```\r\n\r\nInstalling & Usage\r\n------------------\r\nIn node or browserify install with\r\n  $ npm install --save mqtt-emitter\r\n\r\nAnd then use it with\r\n``` javascript\r\nvar MQTTEmitter = require(\"mqtt-emitter\");\r\nvar events = new MQTTEmitter();\r\n```\r\nIf you aren't using [Browserify](http://browserify.org/) (for some crazy reason), then you can build a bundle with `npm run build` or `npm run build-min`. The bundle is UMD compatible and supports UMD, CommonJS and creates a global called MQTTEmitter if neither of those are present.  Just dump the file in your HTML and you can use it with\r\n\r\n``` javascript\r\nvar events = new MQTTEmitter();\r\n```\r\n\r\nAPI\r\n---\r\nThe API is the same as [EventEmitter](https://nodejs.org/api/events.html) except that  `on()`, and `emit()` have custom functionality.\r\n``` javascript\r\nemitter.on(topic_pattern,callback)\r\n```\r\n\r\n`topic_pattern` is a MQTT topic with optional named wildcards which get parsed out. See [mqtt-regex](https://github.com/RangerMauve/mqtt-regex#how-params-work) for how the patterns work.\r\n\r\n`callback` takes four arguments:\r\n - `payload` : The payload that was passed in with `emit()`\r\n - `params` : The parameters parsed out using the topic pattern from the topic. See [mqtt-regex](https://github.com/RangerMauve/mqtt-regex#how-params-work) for details\r\n - `topic` : The topic that was emitted with `emit()`\r\n - `topic_pattern` : The topic pattern that was used when this listener was registered\r\n\r\nThere are also hooks that you can listen for new and removed topic listeners.\r\n\r\n``` javascript\r\n// Override the default behavior with a custom callback for subscribing to topics\r\nemitter.onadd = function (topic) {\r\n\tmqtt.subscribe(\"topic\");\r\n}\r\nemitter.onremove = function (topic) {\r\n\tmqtt.unsubscribe(\"topic\");\r\n}\r\n```\r\n\r\n*Note:* Topic patterns are converted into their regular MQTT counterparts so `foo/+boar/#` is the same as `foo/+baz/#`. They both turn into `foo/+/#`\r\n\r\n*Note:* Because of the nature of this library, the `newListener` and `removeListener` events aren't supported. Use the `onadd()` and `onremove()` hooks instead.\r\n\r\n*Note:* Try to avoid topics with trailing slashes since they can lead to strange behavior.\r\n",
  "readmeFilename": "README.md",
  "_id": "mqtt-emitter@1.2.4",
  "_shasum": "602fbb49178e603640cf747bdf3dc803fc8e593a",
  "_resolved": "https://registry.npmjs.org/mqtt-emitter/-/mqtt-emitter-1.2.4.tgz",
  "_from": "mqtt-emitter@>=1.2.4 <2.0.0"
}
